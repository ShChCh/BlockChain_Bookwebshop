<!DOCTYPE html>
<html>
<head>
<title>Home</title>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="">
<meta name="keywords" content="">
<!-- Latest compiled and minified CSS -->
<link rel="stylesheet" href="css/bootstrap.min.css">
<link href='http://fonts.googleapis.com/css?family=Lato' rel='stylesheet' type='text/css'>
<link rel="stylesheet" type="text/css" href="css/font-awesome.css">
<link rel="stylesheet" type="text/css" href="css/magnific-popup.css">
<link rel="stylesheet" type="text/css" href="css/style.css">
</head>
<body>
<header>
<nav class="navbar navbar-fixed-top" id="header-nav">
<div class="container-fluid">
<!--<div class="navbar-header">
	<a class="navbar-brand" href="#">
		<img src="img/logo.png" alt="Wooster logo" />
	</a>
</div>
-->
<div class="primary-menu">
	<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
			<span class="sr-only">Toggle navigation</span>
			<span class="icon-bar"></span>
			<span class="icon-bar"></span>
			<span class="icon-bar"></span>
	</button>
	<div id="navbar" class="navbar-collapse collapse">
		 <ul class="nav navbar-nav">
			<li><a data-scroll href="#">Home</a></li>
			<li><a data-scroll href="#portfolio">Shopping Cart</a></li>
			<li><a data-scroll href="#about">Item Info</a></li>
			<li><a data-scroll href="#contact">Modify Items</a></li>
		</ul>
	</div>
</div>

</div>
</nav>
  
<div class="main-head">
 <div class="container">
	 <div class="row">
		<div class="col-md-8 col-md-offset-2">
			<h4>Lok'tar Ogar</h4>
			<div class="divider"></div>
			<h1>Online Blockchain Shopping Center</h1>
			<a href="#" class="btn btn-primary btn-lg">Go To My Shopping Cart</a>
		</div>
	</div>
</div>
</div>
</header>

<div class="call-to-action">
 <div class="container">
	 <div class="row">
		<div class="col-md-12 col-md-offset-2">
			<h4>Choose your interested part</h4>
			<div class="divider"></div>
                <div class="col-md-16 text-left">
                    <a style="background-color:gainsboro;margin-right:25px;" href="#" class="btn btn-primary btn-lg">Searching Items</a>
                    <a style="background-color:gainsboro;margin-right:25px;" href="#" class="btn btn-primary btn-lg">See My Transactions</a>
                    <a style="background-color:gainsboro;margin-right:25px;" href="#" class="btn btn-primary btn-lg">See My Selling Items</a>
                    <a style="background-color:gainsboro" href="#" class="btn btn-primary btn-lg">Check Shopping Cart</a>   
                </div>
		</div>
	</div>
</div>
</div>

<!--
<div class="call-to-action">
<div class="container">
	<div class="row">
		<div class="col-md-5 col-md-offset-2">
			<h4>Best psd template for your vintage website. It's free and it's awesome</h4>
		</div>
		<div class="col-md-2">
			<a href="" class="btn btn-cta">Download now</a>
		</div>
	</div>
</div>
</div>-->
<section id="about" style="margin-top:50px;" class="no-padding">
<div class="container">
	<div class="row">
		<div class="col-md-6 section-text">
			<div class="title title-left">
				<h2 id="II_Name">Item Information</h2>
				<div class="divider divider-sm"></div>
                <h4 id="II_Price">Price:14.00</h4>
				<div class="divider divider-sm"></div>
                <h4 id="II_Amount">Amount:15</h4>
				<div class="divider divider-sm"></div>
                <h4 id="II_Seller">Seller:Franky</h4>
				<div class="divider divider-sm"></div>
                <h4>Description:</h4>
                <h5 id="II_Description">LALALALALA AKDJLFKJSL jflasdjfljk</h5>
				<div class="divider divider-sm"></div>
			</div>
			
			<a id="II_AddSC" class="btn btn-primary">Add To Shopping Cart</a>
		</div>
		<div class="col-md-4">
			<img id="II_Img" style="margin-bottom:70px;"  src="img/typewriter.jpg" class="img-responsive">
			<a id="II_Sub" class="btn btn-primary">Sub</a>
            <input id="II_Input" type="text" name="amount1" style="width:20%;height:40px; margin-left:30px;margin-right:30px;"  value="10"/>
			<a id="II_Add" class="btn btn-primary">Add</a>
		</div>
	</div>
</div>
<div class="testimonial">
	<div class="mask">
		<div class="container">
			<div class="row">
				<div class="col-md-8 col-md-offset-2">
					<div class="single-testimonial">
						<i class="fa fa-quote-right"></i>
						<p>The space between an idea and a concept is your lips. If you can’t say it out loud you can’t do it.</p>
						<h6>NICK LONGO </h6>
					</div>  
				</div> 
			</div>
		</div>
	</div>
</div>
</section>
<section class="portfolio" id="portfolio">
<div class="col-md-8 col-md-offset-2">
	<div class="title text-center">
		<h2>Shopping Cart.</h2>
		<div class="divider divider-lg"></div>
		<p>Data of shopping cart would be saved in local browser, careful when you clean history or cache.</p>
	</div>
</div>
<div class="container" id="portfolio-grid">
	<div  class="row team">
		<div id="SC_Sample" hidden="true" class="col-md-3 col-sm-6">
			<div class="team-member">
				<img src="img/team/img2.jpg" class="img-responsive">
				<h6>
                    <button type="submit" style="background-color:gray;padding:5px;margin-right:10px;margin-bottom:13px" class="btn btn-primary">Sub</button>
                    <input type="text" name="amount1" style="width:15%;color:black; margin-bottom:10px;" value="10"/>
                    <button type="submit" style="background-color:gray;padding:5px;margin-left:10px;margin-bottom:13px" class="btn btn-primary">Add</button>
                    <button type="submit" style="background-color:gray;padding:5px;margin-right:10px;margin-bottom:13px" class="btn btn-primary">Delete</button><br />
                    Item2
                </h6>
			</div>
           </div> 
        <div id="SC_List">
		</div>
	<div class="row">
		<div class="col-md-12 text-right">
			<button id="SC_Pay" type="submit" style="margin-right:30px" class="btn btn-primary">Pay</button>
			<button id="SC_Clean" type="submit" class="btn btn-primary">Clean</button>
		</div>
	</div>
    </div>
</div>
</section>
<section class="portfolio" id="portfolio">
<div class="testimonial">
	<div class="mask">
		<div class="container">
			<div class="row">
				<div class="col-md-8 col-md-offset-2">
					<div class="single-testimonial">
						<i class="fa fa-quote-right"></i>
						<p>The space between an idea and a concept is your lips. If you can’t say it out loud you can’t do it.</p>
						<h6>NICK LONGO </h6>
					</div>  
				</div> 
			</div>
		</div>
	</div>
</div>
<div class="col-md-8 col-md-offset-2">
	<div class="title text-center">
		<h2>Selling Items.</h2>
		<div class="divider divider-lg"></div>
		<p>Here are all the items sold by you now.</p>
	</div>
</div>
<div class="container" id="portfolio-grid">
		<div id="SI_Sample" hidden class="col-md-3 col-sm-6">
			<div class="team-member">
				<img src="img/team/img1.jpg" class="img-responsive">
				<h6>
                    <button type="submit" style="background-color:gray;padding:5px;margin-right:10px;" class="btn btn-primary">Delete</button>
                    Item1
                    <button type="submit" style="background-color:gray;padding:5px;margin-left:10px;" class="btn btn-primary">Modify</button>
                </h6>
			</div>
		</div>
	<div id="SI_List" class="row team">
	</div>
	<div class="row team">
        <div class="row">
            <div class="col-md-12 text-right">
                <button type="submit" style="margin-right:30px" class="btn btn-primary">Refresh</button>
                <button type="submit" class="btn btn-primary">New Item</button>
            </div>
        </div>
    </div>
</div>
</section>
<section id="about">
<div class="call-to-action">
	<div class="container">
		<div class="row">
			<div class="col-md-10 col-md-offset-1">
				<h4>Searching Items</h4>
				<div class="row">
					<form class="form-inline">
						<div class="col-md-9">
							<input id="SR_Input" type="text" required="" placeholder="Enter your interests..." class="subscribe-input" name="text">
						</div>
						<div class="col-md-3">
							<button id="SR_SearchBtn" type="submit" class="btn btn-cta">Searching</button>
						</div>
					</form>
				</div>
			</div>
		</div>
	</div>
</div>
<div class="container">
	<div class="row">
		<div class="col-md-8 col-md-offset-2">
			<div class="title">
				<h2>Searching result.</h2>
				<div class="divider divider-lg"></div>
				<p>Data of shopping cart would be saved in local browser, careful when you clean history or cache.</p>
			</div>
		</div>
	</div>
	<div id="SR_Sample" hidden class="col-md-3 col-sm-6">
		<div class="team-member">
			<img onclick="" src="img/team/img1.jpg" class="img-responsive">
			<h6>Item1</h6>
		</div>
	</div>
	<div id="SR_List" class="row team">
	</div>
</div>
<div class="testimonial">
	<div class="mask">
		<div class="container">
			<div class="row">
				<div class="col-md-8 col-md-offset-2">
					<div class="single-testimonial">
						<i class="fa fa-quote-right"></i>
						<p>The space between an idea and a concept is your lips. If you can’t say it out loud you can’t do it.</p>
						<h6>NICK LONGO </h6>
					</div>  
				</div> 
			</div>
		</div>
	</div>
</div>
</section>
<section id="contact">
<div class="container">
	<div class="row">
		<div class="col-md-8 col-md-offset-2">
			<div class="title text-center">
				<h2 id="IM_Header">Modify your items</h2>
				<h6>All modification would be checked</h6>
		</div>
	</div>
<form>
	<div class="row">
		<div class="col-md-6" style="margin-top:20px;">
            <div class="form-group">
                <a class="navbar-brand" href="#">
                    <img id="IM_CurrentImg" style="max-width:80%" src="img/logo.png" alt="Wooster logo" />
                </a>
            </div>
            <div class="form-group" style="margin-top:350px">
                <a class="navbar-brand" href="#">
                    <button id="IM_NewImg" type="submit" class="btn btn-primary">New Image</button>
                </a>
                <a class="navbar-brand" href="#">
                    <button id="IM_SaveImg" type="submit" class="btn btn-primary">Save Image</button>
                </a>
            </div>
        </div>
		<div class="col-md-6" style="margin-top:30px;">
			<div class="form-group">
                <h4>Name:</h4>
				<input id="IM_Name" type="text" name="Name" class="form-control" placeholder="Name*">
			</div>
			<div class="form-group">
                <h4>Amount:</h4>
				<input id="IM_Amount" type="text" name="Amount" class="form-control" placeholder="Amount*">
			</div>
			<div class="form-group">
                <h4>Price(AUD):</h4>
				<input id="IM_Price" type="text" name="Price" class="form-control" placeholder="Price*">
			</div>
                <h4>Description:</h4>
				<textarea id="IM_Description" class="form-control" placeholder="Description should be less than or equal to 240 letters"></textarea>
		</div>
	</div>
	<div class="row">
		<div class="col-md-12 text-right">
			<button id="IM_SaveBtn" type="submit" style="margin-right:30px" class="btn btn-primary">Save</button>
			<button id="IM_CancelBtn" type="submit" class="btn btn-primary">Cancel</button>
		</div>
	</div>
</form>
</div>
</section>
<footer>
<div class="container">
	<div class="row">
		<div class="col-md-12 text-center">
		<img src="img/logo-white.png" class="logo-footer" />
			<ul class="social">
				<li class="wow bounceIn"><a href="#/RqhEjP" target="_blank"><i class="fa fa-facebook"></i></a></li>
				<li class="wow bounceIn" data-wow-delay="0.1s"><a href="#/hUfpSB" target="_blank"><i class="fa fa-twitter"></i></a></li>
				<li class="wow bounceIn" data-wow-delay="0.2s"><a href="#/k9zAy5" target="_blank"><i class="fa fa-dribbble"></i></a></li>
				<li class="wow bounceIn" data-wow-delay="0.3s"><a href="#/FPjuCE" target="_blank"><i class="fa fa-behance"></i></a></li>
				<li class="wow bounceIn" data-wow-delay="0.4s"><a href="#/UYjGTR" target="_blank"><i class="fa fa-pinterest"></i></a></li>
				<li class="wow bounceIn" data-wow-delay="0.5s"><a href="#/r4xzR4" target="_blank"><i class="fa fa-google"></i></a></li>
			</ul>
			<p>COMP9900 Project Team lok'tar Ogar!.</p>
		</div>
	</div>
</div>
</footer>

<script>
// 此处所有的function按所属模块命名
// ------------------------------------------
// HP: Helper
// SI: Selling Items
// SC: Shopping Cart
// II: Item Infomation
// IM: Item Modification
// SR: Searching Result 
// ------------------------------------------
// ----------------HP------------------------
// ------------------------------------------
function HP_newElement(tag){
    var newElement = document.createElement(tag);
    return newElement;
}
function HP_getDomValById(domId){
    var dom = document.getElementById(domId);
    return dom.value;
}
function HP_setDomAttrArr(dom, attrNameArr, attrValArr, len){
    var i = 0;
    for(;i<len; i++){
        dom.setAttribute(attrNameArr[i], attrValArr[i]);
    }
}
function HP_setDomAttr(dom, attrName, attrVal){
        dom.setAttribute(attrName, attrVal);
}
function HP_setDomAttrById(domId, attrName, attrVal){
        var dom = document.getElementById(domId);
        dom.setAttribute(attrName, attrVal);
}
function HP_getDomAttr(dom, attrName){
        return dom.getAttribute(attrName);
}
function HP_getDomAttrById(domId, attrName){
        var dom = document.getElementById(domId);
        return dom.getAttribute(attrName);
}
function HP_setInnerHtmlById(domId, html){
    var itemSec = document.getElementById(domId);
    itemSec.innerHTML = html;
}
function HP_getInnerHtmlById(domId){
    var itemSec = document.getElementById(domId);
    return itemSec.innerHTML;
}
function HP_rmvDomAttr(dom, attrName){
        dom.removeAttribute(attrName);
}
function HP_addDomToParentById(domChild, domParentId){
    var paraElement = document.getElementById(domParentId);
    paraElement.appendChild(domChild);
}
function HP_rmvDomById(domId){
    var dom = document.getElementById(domId);
    HP_rmvDom(dom);
}
function HP_rmvDom(dom){
    domParent = dom.parentNode;
    domParent.removeChild(dom);
}
function HP_cloneDomById(domId){
    var itemSec = document.getElementById(domId);
    console.log(itemSec);
    var newItem = itemSec.cloneNode(true);
    return newItem;
}
function HP_cleanDomAllChild(domId, part, noWindow){
    if(noWindow || confirm('Clean all your items in '+part+'?')){
        var myNode = document.getElementById(domId);
        while (myNode.firstChild) {
            myNode.removeChild(myNode.firstChild);
        }
    }
    else{
        console.log('canceled');
    }
}





// ------------------------------------------

// --------------- Cache --------------------

// ------------------------------------------

function CC_saveCookie(name, val){

    console.log("cookie ======1======== "+document.cookie);

    if(document.cookie.split(";").length>0)

        document.cookie = document.cookie + ";"

    else document.cookie = "";

    document.cookie = name + "=" +val;

    console.log("cookie ======2======== "+document.cookie);

}



function CC_getCookie(name){

    var ck = document.cookie;

    var ar = ck.split(";");

    for(var i=0; i<ar.length; i++)

        if(ar[i].split("=")[0] == name)

            return ar[i].split("=")[1];

    return "";

}





// https://firebasestorage.googleapis.com/v0/b/comp9900-13cd5.appspot.com/o/images%2Fcoffe.jpg?alt=media&token=613b80ae-9fd5-4582-a55b-83feb873bbdf

function CC_getImgStr(str){

    var imgres = str.split("images%2F");

    var imgdata = imgres[1].split("?");

    var imageName = imgdata[0];

    var token = imgdata[1].split("token=")[1];

    return imageName+"__"+token;

}

function CC_saveImgURL(str){

    console.log("Fuck this img: -- "+str);

    var imageName = str.split("__")[0];

    var token = str.split("__")[1];

    return "https://firebasestorage.googleapis.com/v0/b/comp9900-13cd5.appspot.com/o/images%2F"+imageName+"?alt=media&token="+token;

}

// ------------------------------------------

// --------------- Upload--------------------

// ------------------------------------------



function redirBtn(){

    document.querySelector('#uploadFileInput').click();

}

HP_setDomAttrById("IM_ImageBtn","onclick","redirBtn()");



var config = {

    apiKey: "AIzaSyC-giHs7IRTTvHYDrjisukXD0yhjJyiZE0",

    authDomain: "comp9900-13cd5.firebaseapp.com",

    databaseURL: "https://comp9900-13cd5.firebaseio.com",

    projectId: "comp9900-13cd5",

    storageBucket: "comp9900-13cd5.appspot.com",

    messagingSenderId: "77049547082"

};

firebase.initializeApp(config);

var storageRef = firebase.storage().ref();



var uploadedNewImg = "";

var uploadFileInput = document.getElementById("uploadFileInput");

console.log("Andrew: -- "+document.getElementById("uploadFileInput").files);

uploadFileInput.addEventListener("change", function(){

	var file = this.files[0];

  console.log(file.name);

  var uploadTask = storageRef.child('images/'+file.name).put(file);

  uploadTask.on('state_changed', function(snapshot){

    // Observe state change events such as progress, pause, and resume

    // Get task progress, including the number of bytes uploaded and the total number of bytes to be uploaded

    var progress = (snapshot.bytesTransferred / snapshot.totalBytes) * 100;

    console.log('Upload is ' + progress + '% done');

    switch (snapshot.state) {

      case firebase.storage.TaskState.PAUSED: // or 'paused'

        alert("Upload is paused, please try again");

        break;

      case firebase.storage.TaskState.RUNNING: // or 'running'

        break;

    }

  }, function(error) {

    // Handle unsuccessful uploads

        alert("Something wrong, please try again");

  }, function() {

    // Handle successful uploads on complete

    // For instance, get the download URL: https://firebasestorage.googleapis.com/...

    var downloadURL = uploadTask.snapshot.downloadURL;

    uploadedNewImg = downloadURL;

    alert("Uploading Successfully!");

    HP_setDomAttrById("IM_CurrentImg","src",uploadedNewImg);

    console.log(downloadURL);

  });

  // console.log(uploadTask.snapshot.downloadURL);

},false);






// ------------------------------------------
// ---------------Shopping Cart--------------
// ------------------------------------------
function SC_addQuatity(inputId){
    var newVal = parseInt($("#"+inputId+"").val())+1;
    if(newVal<=0){
        newVal = 1;
    }
    $("#"+inputId+"").val(newVal);
}

function SC_subQuatity(inputId){
    var newVal = parseInt($("#"+inputId+"").val());
    if(newVal >= 2){newVal = newVal-1;}
    $("#"+inputId+"").val(newVal);
}


function SC_deleteItem(inputId){
    if(confirm('You wanna delete this item in your shopping cart?')){
        HP_rmvDomById(inputId);
    }
    else{
        console.log('canceled');
    }
}

// 调用这个函数，向购物车中增加item
function SC_addCartItem(id, name, quatity, price){
    var newItem = HP_cloneDomById("SC_Sample");
    HP_rmvDomAttr(newItem, "hidden");
    var cN = newItem.children[0].children[1];
    
    HP_setDomAttr(newItem, "id", id);
    cN.innerHTML = cN.innerHTML.replace("Item2", name);
    HP_setDomAttr(cN.children[1], "value", quatity);
    HP_setDomAttr(cN.children[1], "id", id+"input");
    HP_setDomAttr(cN.children[0], "onclick", "SC_subQuatity(\""+id+"input\""+")");
    HP_setDomAttr(cN.children[2], "onclick", "SC_addQuatity(\""+id+"input\""+")");
    HP_setDomAttr(cN.children[3], "onclick", "SC_deleteItem(\""+id+"\""+")");
    
    HP_addDomToParentById(newItem, "SC_List");
}

// 此处应该是打开 meta fox 付款的接口位置
//for loop to checkout or pay items one by one
function goPay(){
    ;
}

// initial events
HP_setDomAttrById("SC_Pay", "onclick", "goPay()");
HP_setDomAttrById("SC_Clean", "onclick", "HP_cleanDomAllChild(\"SC_List\",\"shopping cart\",false)");

//test case
SC_addCartItem(100, "JB",15, 13);
// ------------------------------------------
// ---------------Item Information-----------
// ------------------------------------------
//how to use this function 
function II_setItemInfo(id, name, price, amount, seller, description, img){
    HP_setInnerHtmlById("II_Name", name);
    HP_setInnerHtmlById("II_Price", "Price:"+price);
    HP_setInnerHtmlById("II_Amount", "Amount:"+amount);
    HP_setInnerHtmlById("II_Seller", "Seller:"+seller);
    HP_setInnerHtmlById("II_Description", name);
    HP_setDomAttrById("II_Img","src","img/"+img);
}

function II_addToShoppingCart(id){
    var name = HP_getInnerHtmlById("II_Name");
    var price = HP_getInnerHtmlById("II_Price").split(":")[1];
    var quatity = HP_getDomValById("II_Input");
    SC_addCartItem(id,name, quatity, price);
}
// initial events
HP_setDomAttrById("II_Sub", "onclick", "SC_subQuatity(\"II_Input\")");
HP_setDomAttrById("II_Add", "onclick", "SC_addQuatity(\"II_Input\")");
HP_setDomAttrById("II_AddSC", "onclick", "II_addToShoppingCart(123)");

//test case
II_setItemInfo(123, "test Name", "15.00", "12", "Joey", "SAONIMA", "keyboard.jpg");

// ------------------------------------------
// -----------Searching Result---------------
// ------------------------------------------
function SR_clearSR(){
    HP_cleanDomAllChild("SR_List", "Searching Result", true);
}

function SR_addItems(id, name, img){
    var newItem = HP_cloneDomById("SR_Sample");
    HP_rmvDomAttr(newItem, "hidden");
    HP_setDomAttr(newItem, "id", id);
    HP_setDomAttr(newItem.children[0].children[0],"src","img/"+img);
    newItem.children[0].children[1].innerHTML = name;
    HP_addDomToParentById(newItem, "SR_List");
}
function itemFilter(itemArr, filterStr){
        var resultArr = new Array();
        var idx = 0;
        var i = 0;
        // console.log(itemArr);
        for (i=0; i<itemArr.length; i++){
            // console.log(itemArr[i][0],itemArr[i][0].toLowerCase().indexOf(filterStr.toLowerCase()));
            if (itemArr[i][1].toLowerCase().indexOf(filterStr.toLowerCase()) !== -1){
                resultArr[idx] = itemArr[i];
                idx++;
            }
        }
        return resultArr;
    }
function SR_searchAdd(){
        // Complete web3.js here.
        // "id","Name","Amount","Price","Seller","Description","img Name"
        SR_clearSR();
        var items = App.Items_list;
        // var items=new Array();
        // items[0] = new Array(12,"Socks","3","5.3","Franky","JB BIG","coffe.jpg");
        // items[1] = new Array(13,"Juice","5","10","Franky","JB BIG","coffe.jpg");
        // items[2] = new Array(14,"T-shirt","7","35","Franky","JB BIG","coffe.jpg");
        // items[3] = new Array(15,"Shoes","9","1.31","Joey","JB BIG","coffe.jpg");
        // items[4] = new Array(16,"Cars","11","12225.3","Joey","JB BIG","coffe.jpg");
        // items[5] = new Array(17,"Next Episode","13","92929292","Joey","JB BIG","coffe.jpg");
        
　　　　var inputTxt = HP_getDomValById("SR_Input");

        // if inputTxt is empty, return random first MaxItemAmount items.
        // otherwise, filter our array to get items which name contains key words.
        if(inputTxt.value === ""){
            alert("Please input key words before searching!");
            return;
        }else{
            var result = itemFilter(items,inputTxt);
            items=result;
        }
        
        var currentItemIdx = 0;
        while(items!==null && currentItemIdx < items.length){
            SR_addItems(items[currentItemIdx][0], items[currentItemIdx][1], "fuck.jpg");
            currentItemIdx ++;
        }
    }
// initial
HP_setDomAttrById("SR_SearchBtn","onclick", "SR_searchAdd()");

// sample
SR_addItems(12, "testName","coffe.jpg");


// ------------------------------------------
// -----------Selling Items------------------
// ------------------------------------------
function SI_clearSI(){
    HP_cleanDomAllChild("SI_List", "Selling Items", true);
}
function SI_AddItems(id, name, img){
    var newItem = HP_cloneDomById("SI_Sample");
    HP_rmvDomAttr(newItem, "hidden");
    HP_setDomAttr(newItem, "id", "SI_"+id);
    var tagItem = newItem.children[0]
    HP_setDomAttr(tagItem.children[0],"src","img/"+img);
    tagItem.children[1].innerHTML.replace("Item2", name);
    HP_setDomAttr(tagItem.children[1].children[0], "onclick", "SI_deleteItem(\"SI_"+id+"\")");
    HP_setDomAttr(tagItem.children[1].children[1], "onclick", "SI_modifyItem(\"SI_"+id+"\")");
    HP_addDomToParentById(newItem, "SI_List");
}


function SI_deleteItem(domId){
    if(confirm('You wanna delete this item in your selling cart?')){
        HP_rmvDomById(domId);
    }
    else{
        console.log('canceled');
    }
}

function SI_modifyItem(domId){
    //这里打开和填充modify界面
    var actualId = domId.split("_")[1];
    IM_newOrModification(false);
    IM_inputItemInfoById(actualId);
}

// sample
SI_AddItems(1231, "Joey", "coffe.jpg");

// ------------------------------------------
// ---------------Item Modification----------
// ------------------------------------------
function IM_newOrModification(mode){
    // new
    if(mode){
        HP_setInnerHtmlById("IM_Header", "Shelf a new product");
        HP_setInnerHtmlById("IM_SaveBtn","Add");
        HP_setDomAttrById("IM_SaveBtn", "onclick", "IM_saveModification(true)");
    }
    else{
        HP_setInnerHtmlById("IM_Header", "Modify your item");
        HP_setInnerHtmlById("IM_SaveBtn","Save");
        HP_setDomAttrById("IM_SaveBtn", "onclick", "IM_saveModification(false)");
    }
}

// 这里用 web3js 通过id 得到 item info
function IM_inputItemInfoById(itemId){
    // fetch info by id here
    var sampleArr = App.Items_dic[itemId];
    // sampleArr[0] = "Keyboard Cherry Berry 0012X";
    // sampleArr[1] = "keyboard.jpg";
    // sampleArr[2] = "10";
    // sampleArr[3] = "1001.00";
    // sampleArr[4] = "Really fucking amazing";
    IM_inputItemInfo(sampleArr[0],sampleArr[1],sampleArr[2],sampleArr[3],sampleArr[4]);
}

function IM_inputItemInfo(name, img, quantity, price, description){
    HP_setDomAttrById("IM_CurrentImg", "src", "img/"+img);
    HP_setDomAttrById("IM_Name", "value", name);
    HP_setDomAttrById("IM_Amount", "value", quantity);
    HP_setDomAttrById("IM_Price", "value", price);
    HP_setInnerHtmlById("IM_Description",  description);
}

function IM_saveModification(newOrModify){
    // 这里需要得到之前modification进来时候用的id
    // Frank
    var id;
    var imgSrc = HP_getDomAttrById("IM_CurrentImg", "src").split("/")[1];
    var newName = HP_getDomValById("IM_Name", "value", name);
    var newAmount = HP_getDomValById("IM_Amount", "value", quantity);
    var newPrice = HP_getDomValById("IM_Price", "value", price);
    var newDescription = HP_getInnerHtmlById("IM_Description",  description);
    // 更新进solidity
    // 新item
    if(newOrModify){
        console.log("add new item");
    }
    // 老item
    else{
        console.log("save old item");
    }
}

// initial

</script>

<script src="js/jquery-1.11.0.min.js"></script>
<script src="js/jquery.mixitup.js"></script>
<script type="text/javascript" src="js/jquery.magnific-popup.min.js"></script>
<script src="js/bootstrap.min.js"></script>
<script type="text/javascript" src="js/smooth-scroll.js"></script>
<script src="js/custom.js"></script>
<script src="js/web3.min.js"></script>
<script src="js/truffle-contract.js"></script>
<script src="js/app.js"></script>
</body>
</html>